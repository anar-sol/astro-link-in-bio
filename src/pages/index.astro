---
import { getEntry } from "astro:content";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

const icons = {
	facebook: "cib:facebook",
	instagram: "cib:instagram",
	youtube: "cib:youtube",
	tiktok: "cib:tiktok",
	etsy: "cib:etsy",
};

const pageConfig = await getEntry("pageConfig", "config");
---

<style>
	*,
	::before,
	::after {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	html {
		font-family:
			system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,
			"Apple Color Emoji", "Segoe UI Emoji";
		line-height: 1.5;
		-webkit-text-size-adjust: 100%;
	}
	/*
	button {
		font-family: inherit;
		font-size: 100%;
		line-height: 1.5;
		margin: 0;
	}

	button,
	[type="button"] {
		-webkit-appearance: button;
	}
	*/
	img {
		display: block;
		vertical-align: middle;
		max-width: 100%;
		height: auto;
	}

	main {
		background: var(--background, #000);
	}

	article {
		display: flex;
		flex-direction: column;
		gap: 3rem;
		padding: 1.5rem;
		margin-inline: auto;
		max-width: 26rem;
		min-height: 100dvh;
		color: var(--text-color, #fff);
	}

	header {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		text-align: center;
	}

	img {
		margin-inline: auto;
		border-radius: 50%;
		width: 7rem;
		height: 7rem;
		object-fit: cover;
	}

	h1 {
		font-size: 1.5rem;
		line-height: 1.167;
	}

	.links {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		list-style: none;
	}

	.links a {
		display: block;
		padding: 0.625rem;
		border: 2px solid var(--link-border-color, darkred);
		border-radius: 1.5rem;
		text-align: center;
		text-decoration: none;
		color: var(--link-text-color, inherit);
	}

	.links a:hover,
	.links a:active {
		background-color: var(--link-background-hover, rgb(94, 0, 0));
		border-color: var(--link-background-hover, rgb(94, 0, 0));
	}

	a.highlight {
		background-color: var(--link-background, darkred);
	}

	.social {
		display: flex;
		justify-content: center;
		gap: 1rem;
		list-style: none;
	}

	.social a {
		display: block;
		width: 2rem;
		height: 2rem;
		color: var(--icons-color, inherit);
	}

	.social a:hover,
	.social a:active {
		color: var(--icons-color-hover, antiqueWhite);
	}

	footer {
		margin-top: auto;
	}
</style>

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{pageConfig?.data.title}</title>
		<meta name="description" content={pageConfig?.data.bio} />
		<meta property="og:title" content={pageConfig?.data.title} />
		<meta property="og:description" content={pageConfig?.data.bio} />
		<meta property="og:locale" content="en_US" />
		<meta property="og:type" content="website" />
		<meta property="og:image" content={pageConfig?.data.image.src} />
		<meta property="og:url" content={Astro.site} />
	</head>
	<body>
		<main>
			<article>
				<header>
					{
						pageConfig && (
							<Image src={pageConfig?.data.image} alt="" />
						)
					}
					<h1>{pageConfig?.data.title}</h1>
					<p>{pageConfig?.data.bio}</p>
				</header>
				<ul class="links">
					{
						pageConfig?.data.links.map((link) => (
							<li>
								<a
									href={link.href}
									target="_blank"
									class:list={[link.highlight && "highlight"]}
								>
									{link.label}
								</a>
							</li>
						))
					}
				</ul>
				<footer>
					<ul class="social">
						{
							pageConfig?.data.social.map((link) => (
								<li>
									<a href={link.href} target="_blank">
										<Icon
											name={
												icons[
													link.type as keyof typeof icons
												]
											}
											title={link.type}
											size="2rem"
										/>
									</a>
								</li>
							))
						}
					</ul>
				</footer>
			</article>
		</main>
	</body>
</html>
